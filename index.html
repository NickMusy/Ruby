<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;UFRFC Budget Tracker&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.summary-card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.2s, box-shadow 0.2s;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.summary-card:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-5px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-overlay, .page {</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: opacity 0.3s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.tooltip-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: inline-block;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.tooltip-text {</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: hidden;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 200px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #555;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #fff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bottom: 125%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: -100px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: opacity 0.3s;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 0.875rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: normal;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.tooltip-container:hover .tooltip-text {</p>
<p class="p1"><span class="Apple-converted-space">            </span>visibility: visible;</p>
<p class="p1"><span class="Apple-converted-space">            </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-100 text-gray-800"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Main Dashboard Page --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="dashboard-page" class="page container mx-auto p-4 sm:p-6 lg:p-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;header class="text-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1 class="text-4xl font-bold text-gray-800"&gt;University of Florida Rugby&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p class="text-xl text-gray-600"&gt;Club Financial Tracker&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="summary-card bg-white p-6 rounded-xl shadow-md border border-gray-200 flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-green-100 p-4 rounded-full mr-4"&gt;&lt;i class="fas fa-arrow-up text-3xl text-green-600"&gt;&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex-1 min-w-0 overflow-hidden"&gt;&lt;h2 class="text-gray-500 text-lg"&gt;Total Revenue&lt;/h2&gt;&lt;p id="total-revenue" class="text-3xl font-bold text-green-600"&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="summary-card bg-white p-6 rounded-xl shadow-md border border-gray-200 flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-red-100 p-4 rounded-full mr-4"&gt;&lt;i class="fas fa-arrow-down text-3xl text-red-600"&gt;&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex-1 min-w-0 overflow-hidden"&gt;&lt;h2 class="text-gray-500 text-lg"&gt;Total Expenses&lt;/h2&gt;&lt;p id="total-expenses" class="text-3xl font-bold text-red-600"&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="summary-card bg-white p-6 rounded-xl shadow-md border border-gray-200 flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-blue-100 p-4 rounded-full mr-4"&gt;&lt;i class="fas fa-balance-scale text-3xl text-blue-600"&gt;&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex-1 min-w-0 overflow-hidden"&gt;&lt;h2 class="text-gray-500 text-lg"&gt;Net Balance&lt;/h2&gt;&lt;p id="net-balance" class="text-3xl font-bold text-blue-600"&gt;$0.00&lt;/p&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="flex justify-center space-x-4 mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="add-revenue-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105"&gt;&lt;i class="fas fa-plus-circle mr-2"&gt;&lt;/i&gt; Add Revenue&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="add-expense-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105"&gt;&lt;i class="fas fa-minus-circle mr-2"&gt;&lt;/i&gt; Add Expense&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-6 rounded-xl shadow-md border border-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-2xl font-semibold mb-4 text-green-700"&gt;Recent Revenue&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="overflow-x-auto"&gt;&lt;table class="w-full text-left"&gt;&lt;thead&gt;&lt;tr class="bg-gray-50 border-b"&gt;&lt;th class="p-4"&gt;Date&lt;/th&gt;&lt;th class="p-4"&gt;Source&lt;/th&gt;&lt;th class="p-4 text-right"&gt;Amount&lt;/th&gt;&lt;th class="p-4 text-center"&gt;Actions&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody id="revenue-table-body"&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="view-all-revenue-container" class="text-center mt-4 hidden"&gt;&lt;button data-page="revenue" class="view-all-btn text-gray-500 hover:text-gray-800 font-bold p-2 rounded-full"&gt;&lt;i class="fas fa-ellipsis-h"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-6 rounded-xl shadow-md border border-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-2xl font-semibold mb-4 text-red-700"&gt;Recent Expenses&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="overflow-x-auto"&gt;&lt;table class="w-full text-left"&gt;&lt;thead&gt;&lt;tr class="bg-gray-50 border-b"&gt;&lt;th class="p-4"&gt;Date&lt;/th&gt;&lt;th class="p-4"&gt;Category&lt;/th&gt;&lt;th class="p-4 text-right"&gt;Amount&lt;/th&gt;&lt;th class="p-4 text-center"&gt;Actions&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody id="expense-table-body"&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="view-all-expenses-container" class="text-center mt-4 hidden"&gt;&lt;button data-page="expense" class="view-all-btn text-gray-500 hover:text-gray-800 font-bold p-2 rounded-full"&gt;&lt;i class="fas fa-ellipsis-h"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Full List Page --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="list-page" class="page container mx-auto p-4 sm:p-6 lg:p-8 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;header class="flex items-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="back-to-dashboard-btn" class="text-blue-500 hover:text-blue-700 font-bold p-2 rounded-full mr-4"&gt;&lt;i class="fas fa-arrow-left text-2xl"&gt;&lt;/i&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1 id="list-page-title" class="text-4xl font-bold text-gray-800"&gt;All Transactions&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/header&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white p-6 rounded-xl shadow-md border border-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="overflow-x-auto"&gt;&lt;table class="w-full text-left"&gt;&lt;thead&gt;&lt;tr id="list-page-header" class="bg-gray-50 border-b"&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody id="list-page-body"&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Transaction Modal --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="transaction-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden opacity-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md m-4 transform transition-transform scale-95"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 id="modal-title" class="text-2xl font-bold mb-6"&gt;Add Transaction&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;form id="transaction-form"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="hidden" id="transaction-type"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-4"&gt;&lt;label for="transaction-date" class="block text-gray-700 mb-2"&gt;Date&lt;/label&gt;&lt;input type="date" id="transaction-date" class="w-full p-3 border rounded-lg" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-4"&gt;&lt;label id="source-category-label" for="transaction-source-category" class="block text-gray-700 mb-2"&gt;Source/Category&lt;/label&gt;&lt;input type="text" id="transaction-source-category" class="w-full p-3 border rounded-lg" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-4"&gt;&lt;label for="transaction-description" class="block text-gray-700 mb-2"&gt;Description / Notes (Optional)&lt;/label&gt;&lt;textarea id="transaction-description" class="w-full p-3 border rounded-lg" rows="3"&gt;&lt;/textarea&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-4"&gt;&lt;label for="transaction-amount" class="block text-gray-700 mb-2"&gt;Amount&lt;/label&gt;&lt;input type="number" id="transaction-amount" class="w-full p-3 border rounded-lg" step="0.01" min="0" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-6"&gt;&lt;label class="block text-gray-700 mb-2"&gt;Payment Type&lt;/label&gt;&lt;div class="flex items-center space-x-4"&gt;&lt;label class="flex items-center"&gt;&lt;input type="radio" name="paymentType" value="One-Time" class="form-radio" checked&gt;&lt;span class="ml-2"&gt;One-Time&lt;/span&gt;&lt;/label&gt;&lt;label class="flex items-center"&gt;&lt;input type="radio" name="paymentType" value="Recurring" class="form-radio"&gt;&lt;span class="ml-2"&gt;Recurring&lt;/span&gt;&lt;/label&gt;&lt;/div&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-end space-x-4"&gt;&lt;button type="button" id="cancel-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg"&gt;Cancel&lt;/button&gt;&lt;button type="submit" id="save-btn" class="text-white font-bold py-2 px-6 rounded-lg"&gt;Save&lt;/button&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script type="module"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";</p>
<p class="p1"><span class="Apple-converted-space">        </span>import { getFirestore, collection, onSnapshot, addDoc, deleteDoc, doc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function initializeAppTracker() {</p>
<p class="p1"><span class="Apple-converted-space">           </span>const firebaseConfig = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>apiKey: "AIzaSyD7e8Wid4iVYmDOfmZ44MWDC_EtghFgQWA",</p>
<p class="p1"><span class="Apple-converted-space">  </span>authDomain: "rugby-budget-tracker.firebaseapp.com",</p>
<p class="p1"><span class="Apple-converted-space">  </span>projectId: "rugby-budget-tracker",</p>
<p class="p1"><span class="Apple-converted-space">  </span>storageBucket: "rugby-budget-tracker.firebasestorage.app",</p>
<p class="p1"><span class="Apple-converted-space">  </span>messagingSenderId: "543575531550",</p>
<p class="p1"><span class="Apple-converted-space">  </span>appId: "1:543575531550:web:ad0979f61d113629890e0f",</p>
<p class="p1"><span class="Apple-converted-space">  </span>measurementId: "G-RYTQ4H1ZB6"</p>
<p class="p1">};</p>
<p class="p1"><span class="Apple-converted-space">            </span>let app, db, auth;</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const config = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : firebaseConfig;</p>
<p class="p1"><span class="Apple-converted-space">                </span>app = initializeApp(config);</p>
<p class="p1"><span class="Apple-converted-space">                </span>db = getFirestore(app);</p>
<p class="p1"><span class="Apple-converted-space">                </span>auth = getAuth(app);</p>
<p class="p1"><span class="Apple-converted-space">                </span>setLogLevel('debug');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (e) { console.error("Firebase init error:", e); return; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const elements = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>totalRevenue: document.getElementById('total-revenue'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>totalExpenses: document.getElementById('total-expenses'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>netBalance: document.getElementById('net-balance'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>revenueTableBody: document.getElementById('revenue-table-body'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>expenseTableBody: document.getElementById('expense-table-body'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>modal: document.getElementById('transaction-modal'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>modalTitle: document.getElementById('modal-title'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>transactionForm: document.getElementById('transaction-form'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>transactionTypeInput: document.getElementById('transaction-type'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>sourceCategoryLabel: document.getElementById('source-category-label'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>saveBtn: document.getElementById('save-btn'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>dashboardPage: document.getElementById('dashboard-page'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>listPage: document.getElementById('list-page'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>listPageTitle: document.getElementById('list-page-title'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>listPageHeader: document.getElementById('list-page-header'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>listPageBody: document.getElementById('list-page-body'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>viewAllRevenueContainer: document.getElementById('view-all-revenue-container'),</p>
<p class="p1"><span class="Apple-converted-space">                </span>viewAllExpensesContainer: document.getElementById('view-all-expenses-container'),</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>let allRevenues = [], allExpenses = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>let listenersAttached = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const appId = typeof __app_id !== 'undefined' ? __app_id : 'ufrfc-default';</p>
<p class="p1"><span class="Apple-converted-space">            </span>const RECENT_LIMIT = 10;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const openModal = (type) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.transactionForm.reset();</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.transactionTypeInput.value = type;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (type === 'revenue') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.modalTitle.textContent = 'Add Revenue';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.sourceCategoryLabel.textContent = 'Source';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.saveBtn.className = 'bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg';</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.modalTitle.textContent = 'Add Expense';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.sourceCategoryLabel.textContent = 'Category';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.saveBtn.className = 'bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.modal.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.modal.classList.remove('opacity-0');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.modal.querySelector('div').classList.remove('scale-95');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, 10);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const closeModal = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.modal.classList.add('opacity-0');</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.modal.querySelector('div').classList.add('scale-95');</p>
<p class="p1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; elements.modal.classList.add('hidden'), 300);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const switchPage = (pageName) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.querySelectorAll('.page').forEach(p =&gt; p.classList.add('hidden'));</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (pageName === 'dashboard') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.dashboardPage.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>elements.listPage.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>renderListPage(pageName);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const renderListPage = (type) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const isRevenue = type === 'revenue';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const data = isRevenue ? allRevenues : allExpenses;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const title = isRevenue ? 'All Revenue' : 'All Expenses';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const headerText = isRevenue ? 'Source' : 'Category';</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.listPageTitle.textContent = title;</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.listPageHeader.innerHTML = `&lt;th class="p-4"&gt;Date&lt;/th&gt;&lt;th class="p-4"&gt;${headerText}&lt;/th&gt;&lt;th class="p-4 text-right"&gt;Amount&lt;/th&gt;&lt;th class="p-4 text-center"&gt;Actions&lt;/th&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderTable(elements.listPageBody, data, type, false);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('add-revenue-btn').addEventListener('click', () =&gt; openModal('revenue'));</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('add-expense-btn').addEventListener('click', () =&gt; openModal('expense'));</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('cancel-btn').addEventListener('click', closeModal);</p>
<p class="p1"><span class="Apple-converted-space">            </span>elements.modal.addEventListener('click', (e) =&gt; { if (e.target === elements.modal) closeModal(); });</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.view-all-btn').forEach(btn =&gt; btn.addEventListener('click', (e) =&gt; switchPage(e.currentTarget.dataset.page)));</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('back-to-dashboard-btn').addEventListener('click', () =&gt; switchPage('dashboard'));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>onAuthStateChanged(auth, user =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (user &amp;&amp; !listenersAttached) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>attachListeners();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>listenersAttached = true;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (!user) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>listenersAttached = false;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (token) signInWithCustomToken(auth, token).catch(e =&gt; console.error("Custom token sign-in failed:", e));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>else signInAnonymously(auth).catch(e =&gt; console.error("Anonymous sign-in failed:", e));</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const adjustFontSize = (element) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const parent = element.parentElement;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!parent) return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>element.style.fontSize = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>let currentFontSize = parseFloat(window.getComputedStyle(element).fontSize);</p>
<p class="p1"><span class="Apple-converted-space">                </span>while (element.scrollWidth &gt; parent.clientWidth &amp;&amp; currentFontSize &gt; 10) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>currentFontSize--;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>element.style.fontSize = `${currentFontSize}px`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>function attachListeners() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const revenueCollection = collection(db, `artifacts/${appId}/public/data/revenue`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const expensesCollection = collection(db, `artifacts/${appId}/public/data/expenses`);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>onSnapshot(revenueCollection, (snapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>allRevenues = snapshot.docs.map(doc =&gt; ({ id: doc.id, ...doc.data() })).sort((a, b) =&gt; new Date(b.date) - new Date(a.date));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, (error) =&gt; console.error("Error fetching revenue:", error));</p>
<p class="p1"><span class="Apple-converted-space">                </span>onSnapshot(expensesCollection, (snapshot) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>allExpenses = snapshot.docs.map(doc =&gt; ({ id: doc.id, ...doc.data() })).sort((a, b) =&gt; new Date(b.date) - new Date(a.date));</p>
<p class="p1"><span class="Apple-converted-space">                    </span>updateUI();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, (error) =&gt; console.error("Error fetching expenses:", error));</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const updateUI = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderTable(elements.revenueTableBody, allRevenues, 'revenue', true);</p>
<p class="p1"><span class="Apple-converted-space">                </span>renderTable(elements.expenseTableBody, allExpenses, 'expense', true);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.viewAllRevenueContainer.style.display = allRevenues.length &gt; RECENT_LIMIT ? 'block' : 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.viewAllExpensesContainer.style.display = allExpenses.length &gt; RECENT_LIMIT ? 'block' : 'none';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const totalRevenue = allRevenues.reduce((sum, item) =&gt; sum + (Number(item.amount) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const totalExpenses = allExpenses.reduce((sum, item) =&gt; sum + (Number(item.amount) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const netBalance = totalRevenue - totalExpenses;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.totalRevenue.textContent = formatCurrency(totalRevenue);</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.totalExpenses.textContent = formatCurrency(totalExpenses);</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.netBalance.textContent = formatCurrency(netBalance);</p>
<p class="p1"><span class="Apple-converted-space">                </span>elements.netBalance.style.color = netBalance &gt;= 0 ? '#10B981' : '#EF4444';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.totalRevenue);</p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.totalExpenses);</p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.netBalance);</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const renderTable = (tbody, data, type, limit) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>tbody.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const dataToShow = limit ? data.slice(0, RECENT_LIMIT) : data;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (dataToShow.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tbody.innerHTML = `&lt;tr&gt;&lt;td colspan="4" class="text-center p-8 text-gray-500"&gt;No transactions yet.&lt;/td&gt;&lt;/tr&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>dataToShow.forEach(item =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const row = document.createElement('tr');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>row.className = 'border-b hover:bg-gray-50';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const paymentTypeBadge = item.paymentType === 'Recurring' ? `&lt;span class="ml-2 text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200"&gt;Recurring&lt;/span&gt;` : `&lt;span class="ml-2 text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-gray-600 bg-gray-200"&gt;One-Time&lt;/span&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const descriptionIcon = item.description ? `&lt;div class="tooltip-container"&gt;&lt;i class="fas fa-info-circle text-gray-400"&gt;&lt;/i&gt;&lt;span class="tooltip-text"&gt;${item.description}&lt;/span&gt;&lt;/div&gt;` : '';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>row.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="p-4"&gt;${new Date(item.date).toLocaleDateString()}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="p-4"&gt;&lt;span&gt;${item.source || item.category || ''}&lt;/span&gt;${paymentTypeBadge}${descriptionIcon}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="p-4 text-right font-medium"&gt;${formatCurrency(item.amount)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;td class="p-4 text-center"&gt;&lt;button data-id="${item.id}" data-type="${type}" class="delete-btn text-red-500 hover:text-red-700"&gt;&lt;i class="fas fa-trash-alt"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/td&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tbody.appendChild(row);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.body.addEventListener('click', async (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const target = e.target.closest('.delete-btn');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!target) return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const id = target.dataset.id;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const type = target.dataset.type;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!id || !type) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (confirm('Are you sure you want to delete this transaction?')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const collectionName = type === 'revenue' ? 'revenue' : 'expenses';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const docRef = doc(db, `artifacts/${appId}/public/data/${collectionName}/${id}`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>await deleteDoc(docRef);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>console.error("Error deleting transaction: ", error);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>alert("Failed to delete transaction.");</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>elements.transactionForm.addEventListener('submit', async (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">                </span>const type = elements.transactionTypeInput.value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newTransaction = {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>date: document.getElementById('transaction-date').value,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>amount: parseFloat(document.getElementById('transaction-amount').value),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>description: document.getElementById('transaction-description').value,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>paymentType: document.querySelector('input[name="paymentType"]:checked').value,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>createdAt: new Date().toISOString()</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (type === 'revenue') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newTransaction.source = document.getElementById('transaction-source-category').value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>newTransaction.category = document.getElementById('transaction-source-category').value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const collectionRef = type === 'revenue' ? collection(db, `artifacts/${appId}/public/data/revenue`) : collection(db, `artifacts/${appId}/public/data/expenses`);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>await addDoc(collectionRef, newTransaction);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>closeModal();</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>console.error("Error adding transaction: ", error);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>alert("Failed to save transaction.");</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const formatCurrency = (amount) =&gt; new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);</p>
<p class="p1"><span class="Apple-converted-space">            </span>window.addEventListener('resize', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.totalRevenue);</p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.totalExpenses);</p>
<p class="p1"><span class="Apple-converted-space">                </span>adjustFontSize(elements.netBalance);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>initializeAppTracker();</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
